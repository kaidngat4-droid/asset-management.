<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£ØµÙˆÙ„ | Ø§Ù„Ù…Ø¹Ù‡Ø¯ Ø§Ù„ÙˆØ·Ù†ÙŠ Ù„Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0d6efd">

<!-- Ø®Ø· Ø¯ÙŠÙˆØ§Ù†ÙŠ Ø§Ø­ØªØ±Ø§ÙÙŠ -->
<link href="https://fonts.googleapis.com/css2?family=Aref+Ruqaa:wght@400;700&display=swap" rel="stylesheet">

<style>
body{
    font-family:"Tahoma", Arial, sans-serif;
    margin:0;
    background:#f4f6f9;
}

/* Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ */
#loginPage{
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:linear-gradient(135deg,#0d6efd,#001f4d);
}
.login-box{
    background:white;
    padding:40px 30px;
    width:90%;
    max-width:420px;
    border-radius:20px;
    text-align:center;
    box-shadow:0 20px 50px rgba(0,0,0,0.35);
    animation: officialFade 0.8s ease-out;
}
.login-box img{
    width:95px;
    height:95px;
    object-fit:contain;
    background:white;
    padding:15px;
    border-radius:50%;
    border:3px solid #d4af37;
    box-shadow:0 8px 25px rgba(0,0,0,0.25);
    margin-bottom:15px;
}
.official-state{
    text-align:center;
    font-size:15px;
    color:#0d6efd;
    line-height:1.4;
    margin-bottom:10px;
}
.institute-highlight{
    font-weight:bold;
    color:#ffb700;
    font-size:16px;
}
.institute-highlight .branch{
    display:block;
    color:#198754;
    font-size:15px;
    margin-top:2px;
}

/* Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø®Ø· Ø¯ÙŠÙˆØ§Ù†ÙŠ */
.system-title{
    font-family:'Aref Ruqaa', serif;
    font-size:26px;
    font-weight:700;
    color:#0d6efd;
    letter-spacing:1px;
    margin-bottom:15px;
}

/* Ø§Ù„Ø­Ù‚ÙˆÙ„ */
.login-box input{
    width:100%;
    padding:12px;
    margin:10px 0;
    border-radius:10px;
    border:1px solid #ccc;
    font-size:14px;
}
.login-box input:focus{
    border-color:#0d6efd;
    outline:none;
    background:#f1f7ff;
}
.login-box button{
    width:100%;
    padding:12px;
    background:linear-gradient(135deg,#0d6efd,#084298);
    border:none;
    color:white;
    font-weight:bold;
    border-radius:10px;
    cursor:pointer;
    transition:0.3s;
}
.login-box button:hover{
    transform:translateY(-2px);
    box-shadow:0 8px 20px rgba(0,0,0,0.3);
}
#errorMsg{
    color:#dc3545;
    margin-top:10px;
    font-weight:bold;
}

/* Ø­Ø±ÙƒØ© Ø¯Ø®ÙˆÙ„ */
@keyframes officialFade{
from{opacity:0; transform:translateY(40px);}
to{opacity:1; transform:translateY(0);}
}

/* Ù‡ÙŠØ¯Ø± Ø§Ù„Ù†Ø¸Ø§Ù… */
.main-header{
    background:linear-gradient(135deg,#0d6efd,#001f4d);
    color:white;
    padding:15px 20px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    flex-wrap:wrap;
}
.header-left{
    display:flex;
    align-items:center;
    gap:15px;
}
.logo{
    width:60px;
    height:auto;
    object-fit:contain;
}
.logo-institute{
    width:80px;
    height:auto;
    object-fit:contain;
}

/* Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‡ÙŠØ¯Ø± Ø¨Ø®Ø· Ø¯ÙŠÙˆØ§Ù†ÙŠ */
.main-header span{
    font-family:'Aref Ruqaa', serif;
    font-weight:bold;
    font-size:20px;
    text-align:center;
    flex:1;
}

.logout-btn{
    background:#dc3545;
    padding:8px 14px;
    border:none;
    color:white;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
}
.logout-btn:hover{ 
    opacity:0.85; 
}

/* Ø§Ù„Ø­Ø§ÙˆÙŠØ© */
.container{
    width:95%;
    max-width:1200px;
    margin:30px auto;
    background:white;
    padding:25px;
    border-radius:15px;
    box-shadow:0 10px 30px rgba(0,0,0,0.08);
}

/* Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
.section-title{
    font-size:20px;
    font-weight:bold;
    color:#0d6efd;
    border-right:5px solid #0d6efd;
    padding-right:10px;
    margin-bottom:20px;
}

/* Ø§Ù„Ø­Ù‚ÙˆÙ„ */
input, select, textarea{
    width:100%;
    padding:10px;
    margin:8px 0 15px;
    border-radius:8px;
    border:1px solid #ccc;
    font-size:14px;
}
input:focus, select:focus, textarea:focus{
    border-color:#0d6efd;
    outline:none;
    background:#f8fbff;
}

/* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
.save-btn{
    background:linear-gradient(135deg,#198754,#0f5132);
    color:white;
    border:none;
    padding:10px 18px;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
}
.save-btn:hover{
    transform:translateY(-2px);
    box-shadow:0 8px 18px rgba(25,135,84,0.4);
}
.delete-btn{
    background:#dc3545;
    color:white;
    border:none;
    padding:6px 12px;
    border-radius:6px;
    cursor:pointer;
    font-weight:bold;
}

/* Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
table{
    width:100%;
    border-collapse:collapse;
    margin-top:20px;
}
th, td{
    border:1px solid #dee2e6;
    padding:10px;
    text-align:center;
    font-size:14px;
}
th{
    background:#0d6efd;
    color:white;
}
tr:nth-child(even){
    background:#f8f9fa;
}
table img{
    width:60px;
    height:60px;
    object-fit:cover;
    border-radius:8px;
}

/* Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù‚ÙŠÙ…Ø© */
#totalValue{
    text-align:right;
    font-weight:bold;
    margin-top:10px;
    font-size:16px;
}

/* ØªØ¬Ø§ÙˆØ¨ */
@media(max-width:768px){
.main-header{flex-direction:column; gap:10px;}
.main-header span{text-align:center;}
.header-left{justify-content:center; gap:10px;}
}
</style>
</head>
<body>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
<div id="loginPage">
    <div class="login-box">
        <img src="assets/logo.png" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ø¯Ø®ÙˆÙ„">
        <div class="official-state">
            Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±ÙŠØ© Ø§Ù„ÙŠÙ…Ù†ÙŠØ©<br>
            <span class="institute-highlight">Ø§Ù„Ù…Ø¹Ù‡Ø¯ Ø§Ù„ÙˆØ·Ù†ÙŠ Ù„Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©<br><span class="branch">ÙØ±Ø¹ Ø¥Ø¨</span></span>
        </div>
        <div class="system-title">ğŸ›ï¸ Ø§Ù„Ø¬Ø±Ø¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£ØµÙˆÙ„</div>
        <input type="text" id="username" placeholder="ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
        <input type="password" id="password" placeholder="ğŸ”‘ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        <button onclick="login()">ğŸš€ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
        <div id="errorMsg"></div>
    </div>
</div>

<!-- Ø§Ù„Ù†Ø¸Ø§Ù… -->
<div id="appPage" style="display:none;">
<header class="main-header">
    <div class="header-left">
        <img src="assets/logo.png" class="logo" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±ÙŠØ©">
        <img src="assets/logo-institute.png" class="logo-institute" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¹Ù‡Ø¯">
    </div>
    <span>ğŸ“Š Ø¥Ø¯Ø§Ø±Ø© Ø£ØµÙˆÙ„ Ø§Ù„Ù…Ø¹Ù‡Ø¯ Ø§Ù„ÙˆØ·Ù†ÙŠ Ù„Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ© ÙØ±Ø¹ Ø¥Ø¨</span>
    <button class="logout-btn" onclick="logout()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
</header>

<div class="container">
<div class="section-title">â• Ø¥Ø¶Ø§ÙØ© Ø£ØµÙ„ Ø¬Ø¯ÙŠØ¯</div>
<input type="text" id="assetId" placeholder="ğŸ”¢ Ø±Ù‚Ù… Ø§Ù„Ø£ØµÙ„" readonly>
<input type="text" id="itemName" placeholder="ğŸª‘ Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù">
<input type="text" id="category" placeholder="ğŸ“‚ Ø§Ù„ÙØ¦Ø©">
<input type="text" id="department" placeholder="ğŸ¢ Ø§Ù„Ù‚Ø³Ù…">
<input type="text" id="location" placeholder="ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹">
<input type="number" id="value" placeholder="ğŸ’° Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ©">
<input type="date" id="entryDate">
<select id="condition">
<option value="">ğŸ“Œ Ø§Ù„Ø­Ø§Ù„Ø©</option>
<option>Ø¬ÙŠØ¯</option>
<option>ÙŠØ­ØªØ§Ø¬ ØµÙŠØ§Ù†Ø©</option>
<option>ØªØ§Ù„Ù</option>
</select>
<textarea id="notes" placeholder="ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©"></textarea>
<input type="file" id="imageInput" accept="image/*">
<button class="save-btn" onclick="addItem()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø£ØµÙ„</button>

<hr>
<div class="section-title">ğŸ“‹ Ø³Ø¬Ù„ Ø§Ù„Ø£ØµÙˆÙ„</div>
<table>
<thead>
<tr>
<th>Ø±Ù‚Ù… Ø§Ù„Ø£ØµÙ„</th>
<th>Ø§Ù„ØµÙ†Ù</th>
<th>Ø§Ù„ÙØ¦Ø©</th>
<th>Ø§Ù„Ù‚Ø³Ù…</th>
<th>Ø§Ù„Ù…ÙˆÙ‚Ø¹</th>
<th>Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ©</th>
<th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
<th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
<th>Ø§Ù„ØµÙˆØ±Ø©</th>
<th>Ø­Ø°Ù</th>
</tr>
</thead>
<tbody id="inventoryTable"></tbody>
</table>
<div id="totalValue">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù‚ÙŠÙ…Ø©: 0 Ø±ÙŠØ§Ù„ ÙŠÙ…Ù†ÙŠ</div>
</div>
</div>

<script>
// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
function login(){
    if(username.value==="admin" && password.value==="1234"){
        localStorage.setItem("loggedIn","true");
        loginPage.style.display="none";
        appPage.style.display="block";
        setNextAssetId();
        renderTable();
    } else { errorMsg.innerText="Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©"; }
}
function logout(){
    localStorage.removeItem("loggedIn");
    location.reload();
}
if(localStorage.getItem("loggedIn")==="true"){
    loginPage.style.display="none";
    appPage.style.display="block";
    setNextAssetId();
    renderTable();
}

// Ø§Ù„Ø¬Ø±Ø¯
let inventory = JSON.parse(localStorage.getItem("inventoryData")) || [];
let lastAssetNumber = parseInt(localStorage.getItem("lastAssetNumber")) || 0;

// Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
function saveData(){ localStorage.setItem("inventoryData", JSON.stringify(inventory)); }

// ØªØ±Ù‚ÙŠÙ… ØªÙ„Ù‚Ø§Ø¦ÙŠ
function getNextAssetId(){
    lastAssetNumber++;
    const newId = 'AS-' + lastAssetNumber.toString().padStart(4,'0');
    assetId.value = newId;
    return newId;
}
function setNextAssetId(){ getNextAssetId(); }

// Ø¥Ø¶Ø§ÙØ© Ø£ØµÙ„ Ø¬Ø¯ÙŠØ¯
function addItem(){
    const file = imageInput.files[0];
    if(!file){ alert("Ø£Ø¶Ù ØµÙˆØ±Ø©"); return; }

    const newAssetId = getNextAssetId();

    const reader = new FileReader();
    reader.onload = function(e){
        inventory.push({
            assetId: newAssetId,
            itemName: itemName.value,
            category: category.value,
            department: department.value,
            location: location.value,
            value: parseFloat(value.value) || 0,
            entryDate: entryDate.value,
            condition: condition.value,
            image: e.target.result
        });
        lastAssetNumber = parseInt(newAssetId.split('-')[1]);
        localStorage.setItem("lastAssetNumber", lastAssetNumber);

        saveData();
        renderTable();

        // Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚ÙˆÙ„
        itemName.value = '';
        category.value = '';
        department.value = '';
        location.value = '';
        value.value = '';
        entryDate.value = '';
        condition.value = '';
        notes.value = '';
        imageInput.value = '';
    };
    reader.readAsDataURL(file);
}

// Ø­Ø°Ù Ø£ØµÙ„
function deleteItem(i){
    inventory.splice(i,1);
    saveData();
    renderTable();
}

// Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ø¯ÙˆÙ„ ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ
function renderTable(){
    inventoryTable.innerHTML = '';
    let total = 0;
    inventory.forEach((item,i)=>{
        inventoryTable.innerHTML += `
        <tr>
            <td>${item.assetId}</td>
            <td>${item.itemName}</td>
            <td>${item.category}</td>
            <td>${item.department}</td>
            <td>${item.location}</td>
            <td>${item.value.toLocaleString()}</td>
            <td>${item.entryDate}</td>
            <td>${item.condition}</td>
            <td><img src="${item.image}"></td>
            <td><button class="delete-btn" onclick="deleteItem(${i})">âŒ</button></td>
        </tr>`;
        total += item.value;
    });
    document.getElementById('totalValue').innerText = 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù‚ÙŠÙ…Ø©: ' + total.toLocaleString() + ' Ø±ÙŠØ§Ù„ ÙŠÙ…Ù†ÙŠ';
}
</script>

</body>
</html>
